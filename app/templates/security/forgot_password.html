{% set title = title|default(_fsdomain('Forgot Password')) %}
{% extends "base-security.html" %}
{% from "security/_macros.html" import render_field_with_errors, render_field, render_form_errors, render_field_errors %}

{% block content %}
<div class="row g-0 flex-fill">
  <div class="col-12 col-lg-6 col-xl-4 border-top-wide border-primary d-flex flex-column justify-content-center">
    <div class="container container-tight my-5 px-lg-5">

      <h2 class="h3 text-center mb-3">Recuperar Contraseña</h2>
      <p class="text-center text-secondary mb-4">
        Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.
      </p>
      <form action="{{ url_for_security('forgot_password') }}" method="post" autocomplete="off" name="forgot_password_form" class="needs-validation" novalidate>
        {{ forgot_password_form.hidden_tag() }}
        {{ render_form_errors(forgot_password_form) }}
        <div class="mb-3">
          <label class="form-label">Correo Electrónico</label>
          <input type="email" class="form-control" placeholder="correo@email.com" name="email" required />
          {{ render_field_errors(forgot_password_form.email) }}
        </div>
        <div class="form-footer">
          {{ render_field_errors(forgot_password_form.csrf_token) }}
          <button type="submit" class="btn btn-primary w-100">Enviar Enlace de Recuperación</button>
        </div>
      </form>
      <div class="text-center text-secondary mt-3">
        ¿Recuerdas tu contraseña? <a href="{{ url_for_security('login') }}" tabindex="-1">Ingresar</a>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-6 col-xl-8 d-none d-lg-block">
    <div class="bg-cover h-100 min-vh-100" style="background-image: url(/static/img/login-cover.webp)"></div>
  </div>
</div>
<script>
  const form = document.querySelector('.needs-validation');
  form.addEventListener('submit', (e) => {
    if (!form.checkValidity()) {
      e.preventDefault();
      e.stopPropagation();
    }
    form.classList.add('was-validated');
  }, false);
</script>
{% endblock content %}
